{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utsav%20Prajapati/Downloads/manhar-total-solution-website%20%282%29/manhar-total-solution-website/lib/db.ts"],"sourcesContent":["import { Pool } from 'pg'\n\nconsole.log('üì¶ Database: Initializing connection pool...')\n\nexport const pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n  ssl: false,\n  max: 20,\n  idleTimeoutMillis: 30000,\n  connectionTimeoutMillis: 5000,\n})\n\npool.on('connect', () => {\n  console.log('‚úÖ Database: New client connected to PostgreSQL')\n})\n\npool.on('error', (err) => {\n  console.error('‚ùå Database: Unexpected error on idle client', (err as Error).message)\n})\n\npool.on('remove', () => {\n  console.log('üîå Database: Client disconnected')\n})\n\nexport const query = async (text: string, params?: any[]) => {\n  console.log('üìù Database: Executing query:', text.substring(0, 50) + '...')\n  const start = Date.now()\n  try {\n    const res = await pool.query(text, params)\n    const duration = Date.now() - start\n    console.log(`‚úÖ Database: Query executed in ${duration}ms, returned ${res.rowCount} rows`)\n    return res\n  } catch (error) {\n    console.error('‚ùå Database: Query error:', (error as Error).message)\n    throw error\n  }\n}\n\nexport const getClient = async () => {\n  console.log('üîó Database: Getting client from pool...')\n  const client = await pool.connect()\n  return client\n}\n\nexport const testConnection = async () => {\n  try {\n    const result = await pool.query('SELECT NOW() as current_time, version() as pg_version')\n    console.log('‚úÖ Database: Connection successful!')\n    console.log('   Server Time:', result.rows[0].current_time)\n    console.log('   PostgreSQL Version:', result.rows[0].pg_version.substring(0, 30))\n    return { success: true, time: result.rows[0].current_time, version: result.rows[0].pg_version }\n  } catch (error: any) {\n    console.error('‚ùå Database: Connection failed!')\n    console.error('   Error:', error.message)\n    return { success: false, error: error.message }\n  }\n}\n\nexport default pool\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;;;;;AAEA,QAAQ,GAAG,CAAC;AAEL,MAAM,OAAO,IAAI,+PAAI,CAAC;IAC3B,kBAAkB,QAAQ,GAAG,CAAC,YAAY;IAC1C,KAAK;IACL,KAAK;IACL,mBAAmB;IACnB,yBAAyB;AAC3B;AAEA,KAAK,EAAE,CAAC,WAAW;IACjB,QAAQ,GAAG,CAAC;AACd;AAEA,KAAK,EAAE,CAAC,SAAS,CAAC;IAChB,QAAQ,KAAK,CAAC,+CAA+C,AAAC,IAAc,OAAO;AACrF;AAEA,KAAK,EAAE,CAAC,UAAU;IAChB,QAAQ,GAAG,CAAC;AACd;AAEO,MAAM,QAAQ,OAAO,MAAc;IACxC,QAAQ,GAAG,CAAC,iCAAiC,KAAK,SAAS,CAAC,GAAG,MAAM;IACrE,MAAM,QAAQ,KAAK,GAAG;IACtB,IAAI;QACF,MAAM,MAAM,MAAM,KAAK,KAAK,CAAC,MAAM;QACnC,MAAM,WAAW,KAAK,GAAG,KAAK;QAC9B,QAAQ,GAAG,CAAC,CAAC,8BAA8B,EAAE,SAAS,aAAa,EAAE,IAAI,QAAQ,CAAC,KAAK,CAAC;QACxF,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B,AAAC,MAAgB,OAAO;QAClE,MAAM;IACR;AACF;AAEO,MAAM,YAAY;IACvB,QAAQ,GAAG,CAAC;IACZ,MAAM,SAAS,MAAM,KAAK,OAAO;IACjC,OAAO;AACT;AAEO,MAAM,iBAAiB;IAC5B,IAAI;QACF,MAAM,SAAS,MAAM,KAAK,KAAK,CAAC;QAChC,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,mBAAmB,OAAO,IAAI,CAAC,EAAE,CAAC,YAAY;QAC1D,QAAQ,GAAG,CAAC,0BAA0B,OAAO,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG;QAC7E,OAAO;YAAE,SAAS;YAAM,MAAM,OAAO,IAAI,CAAC,EAAE,CAAC,YAAY;YAAE,SAAS,OAAO,IAAI,CAAC,EAAE,CAAC,UAAU;QAAC;IAChG,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC;QACd,QAAQ,KAAK,CAAC,aAAa,MAAM,OAAO;QACxC,OAAO;YAAE,SAAS;YAAO,OAAO,MAAM,OAAO;QAAC;IAChD;AACF;uCAEe"}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utsav%20Prajapati/Downloads/manhar-total-solution-website%20%282%29/manhar-total-solution-website/app/api/reviews/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { query } from '@/lib/db'\n\nexport async function GET() {\n  try {\n    const result = await query(\n      'SELECT * FROM customer_reviews ORDER BY created_at DESC'\n    )\n    return NextResponse.json({ reviews: result.rows })\n  } catch (error) {\n    console.error('Reviews GET error:', error)\n    return NextResponse.json({ error: 'Failed to fetch reviews' }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json()\n    const { name, rating, message } = body\n\n    if (!name || !rating || !message) {\n      return NextResponse.json(\n        { error: 'Name, rating and message are required' },\n        { status: 400 }\n      )\n    }\n\n    if (rating < 1 || rating > 5) {\n      return NextResponse.json(\n        { error: 'Rating must be between 1 and 5' },\n        { status: 400 }\n      )\n    }\n\n    const result = await query(\n      'INSERT INTO customer_reviews (name, rating, message) VALUES ($1, $2, $3) RETURNING *',\n      [name, rating, message]\n    )\n\n    return NextResponse.json({ \n      message: 'Review added successfully', \n      review: result.rows[0] \n    }, { status: 201 })\n  } catch (error) {\n    console.error('Reviews POST error:', error)\n    return NextResponse.json({ error: 'Failed to add review' }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,SAAS,MAAM,IAAA,8NAAK,EACxB;QAEF,OAAO,0PAAY,CAAC,IAAI,CAAC;YAAE,SAAS,OAAO,IAAI;QAAC;IAClD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QACpC,OAAO,0PAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA0B,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACF;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG;QAElC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,SAAS;YAChC,OAAO,0PAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAwC,GACjD;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,SAAS,KAAK,SAAS,GAAG;YAC5B,OAAO,0PAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAiC,GAC1C;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,SAAS,MAAM,IAAA,8NAAK,EACxB,wFACA;YAAC;YAAM;YAAQ;SAAQ;QAGzB,OAAO,0PAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,QAAQ,OAAO,IAAI,CAAC,EAAE;QACxB,GAAG;YAAE,QAAQ;QAAI;IACnB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,0PAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5E;AACF"}}]
}