{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utsav%20Prajapati/Downloads/manhar-total-solution-website%20%282%29/manhar-total-solution-website/lib/db.ts"],"sourcesContent":["import { Pool } from 'pg'\n\nconsole.log('üì¶ Database: Initializing connection pool...')\n\nexport const pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n  ssl: false,\n  max: 20,\n  idleTimeoutMillis: 30000,\n  connectionTimeoutMillis: 5000,\n})\n\npool.on('connect', () => {\n  console.log('‚úÖ Database: New client connected to PostgreSQL')\n})\n\npool.on('error', (err) => {\n  console.error('‚ùå Database: Unexpected error on idle client', (err as Error).message)\n})\n\npool.on('remove', () => {\n  console.log('üîå Database: Client disconnected')\n})\n\nexport const query = async (text: string, params?: any[]) => {\n  console.log('üìù Database: Executing query:', text.substring(0, 50) + '...')\n  const start = Date.now()\n  try {\n    const res = await pool.query(text, params)\n    const duration = Date.now() - start\n    console.log(`‚úÖ Database: Query executed in ${duration}ms, returned ${res.rowCount} rows`)\n    return res\n  } catch (error) {\n    console.error('‚ùå Database: Query error:', (error as Error).message)\n    throw error\n  }\n}\n\nexport const getClient = async () => {\n  console.log('üîó Database: Getting client from pool...')\n  const client = await pool.connect()\n  return client\n}\n\nexport const testConnection = async () => {\n  try {\n    const result = await pool.query('SELECT NOW() as current_time, version() as pg_version')\n    console.log('‚úÖ Database: Connection successful!')\n    console.log('   Server Time:', result.rows[0].current_time)\n    console.log('   PostgreSQL Version:', result.rows[0].pg_version.substring(0, 30))\n    return { success: true, time: result.rows[0].current_time, version: result.rows[0].pg_version }\n  } catch (error: any) {\n    console.error('‚ùå Database: Connection failed!')\n    console.error('   Error:', error.message)\n    return { success: false, error: error.message }\n  }\n}\n\nexport default pool\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;;;;;AAEA,QAAQ,GAAG,CAAC;AAEL,MAAM,OAAO,IAAI,+PAAI,CAAC;IAC3B,kBAAkB,QAAQ,GAAG,CAAC,YAAY;IAC1C,KAAK;IACL,KAAK;IACL,mBAAmB;IACnB,yBAAyB;AAC3B;AAEA,KAAK,EAAE,CAAC,WAAW;IACjB,QAAQ,GAAG,CAAC;AACd;AAEA,KAAK,EAAE,CAAC,SAAS,CAAC;IAChB,QAAQ,KAAK,CAAC,+CAA+C,AAAC,IAAc,OAAO;AACrF;AAEA,KAAK,EAAE,CAAC,UAAU;IAChB,QAAQ,GAAG,CAAC;AACd;AAEO,MAAM,QAAQ,OAAO,MAAc;IACxC,QAAQ,GAAG,CAAC,iCAAiC,KAAK,SAAS,CAAC,GAAG,MAAM;IACrE,MAAM,QAAQ,KAAK,GAAG;IACtB,IAAI;QACF,MAAM,MAAM,MAAM,KAAK,KAAK,CAAC,MAAM;QACnC,MAAM,WAAW,KAAK,GAAG,KAAK;QAC9B,QAAQ,GAAG,CAAC,CAAC,8BAA8B,EAAE,SAAS,aAAa,EAAE,IAAI,QAAQ,CAAC,KAAK,CAAC;QACxF,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B,AAAC,MAAgB,OAAO;QAClE,MAAM;IACR;AACF;AAEO,MAAM,YAAY;IACvB,QAAQ,GAAG,CAAC;IACZ,MAAM,SAAS,MAAM,KAAK,OAAO;IACjC,OAAO;AACT;AAEO,MAAM,iBAAiB;IAC5B,IAAI;QACF,MAAM,SAAS,MAAM,KAAK,KAAK,CAAC;QAChC,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,mBAAmB,OAAO,IAAI,CAAC,EAAE,CAAC,YAAY;QAC1D,QAAQ,GAAG,CAAC,0BAA0B,OAAO,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG;QAC7E,OAAO;YAAE,SAAS;YAAM,MAAM,OAAO,IAAI,CAAC,EAAE,CAAC,YAAY;YAAE,SAAS,OAAO,IAAI,CAAC,EAAE,CAAC,UAAU;QAAC;IAChG,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC;QACd,QAAQ,KAAK,CAAC,aAAa,MAAM,OAAO;QACxC,OAAO;YAAE,SAAS;YAAO,OAAO,MAAM,OAAO;QAAC;IAChD;AACF;uCAEe"}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utsav%20Prajapati/Downloads/manhar-total-solution-website%20%282%29/manhar-total-solution-website/lib/auth.ts"],"sourcesContent":["import jwt from 'jsonwebtoken'\nimport bcrypt from 'bcryptjs'\n\nconst JWT_SECRET = process.env.JWT_SECRET || 'manhar-secret-key-change-in-production'\nconst JWT_EXPIRES_IN = '7d'\n\nexport interface UserPayload {\n  id: number\n  email: string\n  name: string\n  role: string\n}\n\nexport async function hashPassword(password: string): Promise<string> {\n  const salt = await bcrypt.genSalt(10)\n  return bcrypt.hash(password, salt)\n}\n\nexport async function comparePassword(password: string, hashedPassword: string): Promise<boolean> {\n  return bcrypt.compare(password, hashedPassword)\n}\n\nexport function generateToken(user: UserPayload): string {\n  return jwt.sign(user, JWT_SECRET, { expiresIn: JWT_EXPIRES_IN })\n}\n\nexport function verifyToken(token: string): UserPayload {\n  return jwt.verify(token, JWT_SECRET) as UserPayload\n}\n\nexport function generateRefreshToken(user: UserPayload): string {\n  return jwt.sign(user, JWT_SECRET + '-refresh', { expiresIn: '30d' })\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;;;AAEA,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAC7C,MAAM,iBAAiB;AAShB,eAAe,aAAa,QAAgB;IACjD,MAAM,OAAO,MAAM,wPAAM,CAAC,OAAO,CAAC;IAClC,OAAO,wPAAM,CAAC,IAAI,CAAC,UAAU;AAC/B;AAEO,eAAe,gBAAgB,QAAgB,EAAE,cAAsB;IAC5E,OAAO,wPAAM,CAAC,OAAO,CAAC,UAAU;AAClC;AAEO,SAAS,cAAc,IAAiB;IAC7C,OAAO,4PAAG,CAAC,IAAI,CAAC,MAAM,YAAY;QAAE,WAAW;IAAe;AAChE;AAEO,SAAS,YAAY,KAAa;IACvC,OAAO,4PAAG,CAAC,MAAM,CAAC,OAAO;AAC3B;AAEO,SAAS,qBAAqB,IAAiB;IACpD,OAAO,4PAAG,CAAC,IAAI,CAAC,MAAM,aAAa,YAAY;QAAE,WAAW;IAAM;AACpE"}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Utsav%20Prajapati/Downloads/manhar-total-solution-website%20%282%29/manhar-total-solution-website/app/api/reviews/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { query } from '@/lib/db'\nimport { verifyToken } from '@/lib/auth'\n\nexport async function GET() {\n  try {\n    const result = await query(\n      'SELECT * FROM customer_reviews ORDER BY created_at DESC'\n    )\n    return NextResponse.json({ reviews: result.rows })\n  } catch (error) {\n    console.error('Reviews GET error:', error)\n    return NextResponse.json({ error: 'Failed to fetch reviews' }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const token = request.cookies.get('token')?.value\n    if (!token) {\n      return NextResponse.json({ error: 'Unauthorized - Please login to submit a review' }, { status: 401 })\n    }\n\n    const user = verifyToken(token)\n    const body = await request.json()\n    const { rating, message } = body\n\n    if (!rating || !message) {\n      return NextResponse.json(\n        { error: 'Rating and message are required' },\n        { status: 400 }\n      )\n    }\n\n    if (rating < 1 || rating > 5) {\n      return NextResponse.json(\n        { error: 'Rating must be between 1 and 5' },\n        { status: 400 }\n      )\n    }\n\n    const name = user.name\n\n    const result = await query(\n      'INSERT INTO customer_reviews (name, rating, message) VALUES ($1, $2, $3) RETURNING *',\n      [name, rating, message]\n    )\n\n    return NextResponse.json({ \n      message: 'Review added successfully', \n      review: result.rows[0] \n    }, { status: 201 })\n  } catch (error) {\n    console.error('Reviews POST error:', error)\n    return NextResponse.json({ error: 'Failed to add review' }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,SAAS,MAAM,IAAA,8NAAK,EACxB;QAEF,OAAO,0PAAY,CAAC,IAAI,CAAC;YAAE,SAAS,OAAO,IAAI;QAAC;IAClD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QACpC,OAAO,0PAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA0B,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACF;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,UAAU;QAC5C,IAAI,CAAC,OAAO;YACV,OAAO,0PAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAiD,GAAG;gBAAE,QAAQ;YAAI;QACtG;QAEA,MAAM,OAAO,IAAA,sOAAW,EAAC;QACzB,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG;QAE5B,IAAI,CAAC,UAAU,CAAC,SAAS;YACvB,OAAO,0PAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAkC,GAC3C;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,SAAS,KAAK,SAAS,GAAG;YAC5B,OAAO,0PAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAiC,GAC1C;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,OAAO,KAAK,IAAI;QAEtB,MAAM,SAAS,MAAM,IAAA,8NAAK,EACxB,wFACA;YAAC;YAAM;YAAQ;SAAQ;QAGzB,OAAO,0PAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,QAAQ,OAAO,IAAI,CAAC,EAAE;QACxB,GAAG;YAAE,QAAQ;QAAI;IACnB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,0PAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5E;AACF"}}]
}